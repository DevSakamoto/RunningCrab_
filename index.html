<!DOCTYPE html>
<html>
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link href="css/index.css" rel="stylesheet">

  <style>
    body {
      background-image: url('crab.png');
      background-repeat: repeat; /* æ¨ªæ–¹å‘ã«ç¹°ã‚Šè¿”ã™ */
      animation: scrollBackground 20s linear infinite; /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­å®š */
      transform: rotate;
    }
    @keyframes scrollBackground {
      0% {
        background-position: 0 0; /* åˆæœŸä½ç½® */
      }
      100% {
        background-position: 100% 200%; /* çµ‚äº†ä½ç½® */
      }
    }

    .button-effect {
      animation: buttonEffect 0.3s ease-in-out;
    }
    
    @keyframes buttonEffect {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.1);
      }
      100% {
        transform: scale(1);
      }
    }
  </style>
 
  <title>ã‚«ãƒ‹Util</title>
  <script>
    var offset = 0;

    window.onload = function () {
      generateRunningPlan(offset);
    };
    
    function generateRunningPlan(add) {
      offset += add;
      var now = new Date();
      var currentYear = now.getFullYear();
      var currentMonth = now.getMonth();
      var targetMonth = (currentMonth + offset + 12) % 12; // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®æœˆã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

      var firstDayOfTargetMonth = new Date(currentYear, targetMonth, 1);
      var firstWednesdayOfTargetMonth = new Date(currentYear, targetMonth, 1 + ((3 - firstDayOfTargetMonth.getDay() + 7) % 7));
      var secondWednesdayOfTargetMonth = new Date(currentYear, targetMonth, firstWednesdayOfTargetMonth.getDate() + 7);

      var options = { weekday: 'short', year: 'numeric', month: 'numeric', day: 'numeric' };
      var formattedDateTargetMonth = secondWednesdayOfTargetMonth.toLocaleDateString('ja-JP', options);

      var prefix = "æ¬¡ã®ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã¯\n";
      var suffix = " ã§ã™ğŸƒ\n\n19:40 ä»£ã€…æœ¨å…¬åœ’é›†åˆâ›²\n19:45 Runé–‹å§‹ğŸ’¨\n20:45 Runçµ‚äº†ğŸº\n\nä¸‹è¨˜ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§\nå‚åŠ è¡¨æ˜ãŠé¡˜ã„ã—ã¾ã™ğŸ™‡\nâ¤ï¸ï¼šå‚åŠ \nğŸ˜®ï¼šä¸å‚åŠ (èª¿æ•´ä¸­ï¼‰\nğŸ˜¢ï¼šä¸å‚åŠ ";
      var runningPlan1Element = document.getElementById("running-plan1");
      runningPlan1Element.value = prefix + formattedDateTargetMonth + suffix;
      var messageElement = document.getElementById("message");

      messageElement.textContent = getMessageText(offset)

    }

    function getMessageText(offset) {
      if (offset === 1) {
        return "1ãƒ¶æœˆå¾Œã®ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°æƒ…å ±ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚";
      } else if (offset === -1) {
        return "1ãƒ¶æœˆå‰ã®ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°æƒ…å ±ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚";
      }
      return "";
    }

    function copyRunningPlan(i) {
      var runningPlanElement = document.getElementById("running-plan" + i);
      runningPlanElement.select();
      document.execCommand("copy");
      
      alert("ğŸ¦€ä¸‹è¨˜ã‚’Crab Copyã—ãŸï½¶ï¾†ğŸ¦€\n\n--------\n" + runningPlanElement.value);
    }

    function buttonClickEffect(button) {
      button.classList.add("button-effect");
      setTimeout(function() {
        button.classList.remove("button-effect");
      }, 300);
    }

    function vibrateDevice(ms) {
      // Vibration APIãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¢ºèª
      if ("vibrate" in navigator) {
        // 1000ãƒŸãƒªç§’ï¼ˆ1ç§’é–“ï¼‰ã®æŒ¯å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè¡Œ
        navigator.vibrate(ms);
      } else {
        console.log("ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯Vibration APIã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚");
      }
    }

  </script>
</head>
<body >
  <center>
  <h2>ã‚«ãƒ‹Util</h2>
  <button onclick="buttonClickEffect(this);copyRunningPlan(1);vibrateDevice(2000);" style="width: 80%; height: 150px; font-size:3em;">Crab Copy</button>
  <textarea id="running-plan1" readonly style="width: 80%; height: 400px;"></textarea>
  <br>
  <button onclick="buttonClickEffect(this);generateRunningPlan(-1);vibrateDevice(1000);" style="width: 40%; height: 150px; font-size:1.5em;">1ãƒ¶æœˆå‰</button>
  <button onclick="buttonClickEffect(this);generateRunningPlan(1);vibrateDevice(1000);" style="width: 40%; height: 150px; font-size:1.5em;">1ãƒ¶æœˆå¾Œ</button>

  </center>
</body>
</html>